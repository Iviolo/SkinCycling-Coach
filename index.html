<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>SkinCycling Coach</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #FDFCF8;
      color: #44403C;
      -webkit-tap-highlight-color: transparent;
    }
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Nunito', sans-serif;
    }
    .glass-panel {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const { useState, useEffect, createElement: h } = React;
    const { createRoot } = ReactDOM;

    function App() {
      const [routine, setRoutine] = useState({
        night1: { products: [], completed: false },
        night2: { products: [], completed: false },
        night3: { products: [], completed: false },
        night4: { products: [], completed: false }
      });
      const [newProduct, setNewProduct] = useState('');
      const [selectedNight, setSelectedNight] = useState('night1');

      const addProduct = () => {
        if (newProduct.trim()) {
          setRoutine(prev => ({
            ...prev,
            [selectedNight]: {
              ...prev[selectedNight],
              products: [...prev[selectedNight].products, newProduct]
            }
          }));
          setNewProduct('');
        }
      };

      const toggleNightComplete = (night) => {
        setRoutine(prev => ({
          ...prev,
          [night]: { ...prev[night], completed: !prev[night].completed }
        }));
      };

      const removeProduct = (night, index) => {
        setRoutine(prev => ({
          ...prev,
          [night]: {
            ...prev[night],
            products: prev[night].products.filter((_, i) => i !== index)
          }
        }));
      };

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-pink-50 via-white to-blue-50 p-4' },
        h('div', { className: 'max-w-md mx-auto' },
          h('div', { className: 'text-center mb-8 mt-6' },
            h('h1', { className: 'text-4xl font-bold text-gray-800 mb-2' }, 'ðŸŒ™ SkinCycling Coach'),
            h('p', { className: 'text-gray-600' }, 'Traccia la tua routine skincare 4 notti')
          ),

          h('div', { className: 'glass-panel rounded-2xl p-6 mb-6' },
            h('div', { className: 'mb-4' },
              h('label', { className: 'block text-sm font-semibold text-gray-700 mb-2' }, 'Aggiungi Prodotto:'),
              h('div', { className: 'flex gap-2' },
                h('input', {
                  type: 'text',
                  value: newProduct,
                  onChange: (e) => setNewProduct(e.target.value),
                  onKeyPress: (e) => e.key === 'Enter' && addProduct(),
                  placeholder: 'Es: Retinolo, Vitamina C...',
                  className: 'flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500'
                }),
                h('button', {
                  onClick: addProduct,
                  className: 'px-4 py-2 bg-pink-500 text-white rounded-lg font-medium hover:bg-pink-600 transition'
                }, '+')
              )
            ),
            h('div', { className: 'flex gap-2 mb-4' },
              ['night1', 'night2', 'night3', 'night4'].map((night, i) =>
                h('button', {
                  key: night,
                  onClick: () => setSelectedNight(night),
                  className: `flex-1 py-2 rounded-lg font-medium transition ${
                    selectedNight === night
                      ? 'bg-pink-500 text-white'
                      : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                  }`
                }, `Notte ${i + 1}`)
              )
            )
          ),

          h('div', { className: 'space-y-4' },
            ['night1', 'night2', 'night3', 'night4'].map((night, i) =>
              h('div', { key: night, className: 'glass-panel rounded-xl p-4' },
                h('div', { className: 'flex items-center justify-between mb-3' },
                  h('h2', { className: 'text-lg font-semibold text-gray-800' }, `Notte ${i + 1}`),
                  h('button', {
                    onClick: () => toggleNightComplete(night),
                    className: `px-3 py-1 rounded-full text-sm font-medium transition ${
                      routine[night].completed
                        ? 'bg-green-500 text-white'
                        : 'bg-gray-300 text-gray-700 hover:bg-gray-400'
                    }`
                  }, routine[night].completed ? 'âœ“ Fatto' : 'Marca come fatto')
                ),
                h('ul', { className: 'space-y-2' },
                  routine[night].products.length > 0
                    ? routine[night].products.map((product, idx) =>
                        h('li', {
                          key: idx,
                          className: 'flex justify-between items-center bg-white bg-opacity-50 p-2 rounded-lg'
                        },
                          h('span', { className: 'text-gray-700' }, product),
                          h('button', {
                            onClick: () => removeProduct(night, idx),
                            className: 'text-red-500 hover:text-red-700 font-bold'
                          }, 'Ã—')
                        )
                      )
                    : h('li', { className: 'text-gray-500 italic' }, 'Nessun prodotto aggiunto')
                )
              )
            )
          )
        )
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(h(App));
  </script>
</body>
</html>
